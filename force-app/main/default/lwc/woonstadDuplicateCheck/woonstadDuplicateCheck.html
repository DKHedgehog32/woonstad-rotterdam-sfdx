<!-- **********************************************************************************************
     Component       : woonstadDuplicateCheck (HTML)
     Layer           : Lightning Web Component Template (Flow Screen)
     Purpose         : Show possible duplicate Accounts; allow proceeding with a new customer via
                       Woonstad SVG pill button that enables after checking the checkbox.
     Owner           : Woonstad KC
     Author          : Dennis van Musschenbroek
     Created         : 2025-08-12
     Last Modified   : 2025-08-27
     ==============================================================================================
     Change Log
     ==============================================================================================
     2025-08-27 | DvM | Added blue Woonstad SVG pill next to checkbox (disabled until checked).
     2025-08-27 | DvM | Restored full legacy layout: header, loading, results, countdown.
************************************************************************************************* -->
<template>
    <div class="woonstad wc-root">
        <!-- Title -->
        <h2 class="wc-title">Controleer gegevens</h2>

        <!-- Instruction list (above the header) -->
        <template if:true={hasRows}>
            <ul class="wc-instructions-list" role="list">
                <li class="wc-instructions-item">
                    We hebben op basis van de ingevoerde gegevens onderstaande klanten gevonden.
                    Kijk of jouw klant hier tussen zit.
                </li>
                <li class="wc-instructions-item">
                    Als de klant die je aan de telefoon hebt hier tussen zit, klik dan op de klant
                    en je wordt automatisch naar de klantenkaart gestuurd om vanuit daar het proces verder te starten.
                </li>
                <li class="wc-instructions-item">
                    Staat de klant er niet tussen of wil je een nieuwe klant aanmaken?
                    Vink dan de onderstaande checkbox aan. Daarna wordt de knop beschikbaar om verder te gaan.
                </li>

                <!-- Checkbox + Woonstad SVG pill inline -->
                <li class="wc-instructions-item wc-instructions-item--checkbox">
                    <label class="wc-check">
                        <input type="checkbox" onchange={handleNewCustomerCheckbox} />
                        <span>Ik wil een nieuwe klant aanmaken</span>
                    </label>

                    <button class="woonstad-svg-button"
                            onclick={handleNext}
                            title="Nieuwe klant aanmaken"
                            disabled={isCreateBtnDisabled}
                            aria-disabled={isCreateBtnDisabled}
                            type="button">
                        <span>Nieuwe klant aanmaken</span>
                        <span class="icon-wrapper" aria-hidden="true">
                            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"/>
                            </svg>
                        </span>
                    </button>
                </li>
            </ul>
        </template>

        <!-- Header bar (always visible) -->
        <div class="wc-header" role="row">
            <div class="wc-col" role="columnheader">Naam</div>
            <div class="wc-col" role="columnheader">Geboortedatum</div>
            <div class="wc-col" role="columnheader">Telefoon</div>
            <div class="wc-col" role="columnheader">IBAN</div>
            <div class="wc-col" role="columnheader">Adres</div>
            <div class="wc-col" role="columnheader">Postcode</div>
        </div>

        <!-- Results -->
        <template if:true={hasRows}>
            <div class="wc-rows">
                <template for:each={rows} for:item="r">
                    <button
                        key={r.Id}
                        class="wc-row"
                        role="row"
                        type="button"
                        data-id={r.Id}
                        onclick={handleRowClick}
                        onkeydown={handleRowKeydown}
                        title="Selecteer deze klant">
                        <div class="wc-cell" title={r.Name}>{r.Name}</div>
                        <div class="wc-cell">{r.PersonBirthdate}</div>
                        <div class="wc-cell">
                            <div>{r.Phone}</div>
                            <div class="wc-sub">{r.PersonMobilePhone}</div>
                        </div>
                        <div class="wc-cell">{r.MaskedIban}</div>
                        <div class="wc-cell" title={r.AddressName}>{r.AddressName}</div>
                        <div class="wc-cell">{r.PostalCode}</div>
                    </button>
                </template>
            </div>
        </template>

        <!-- Loading -->
        <template if:true={loading}>
            <div class="wc-loading">
                <lightning-spinner alternative-text="Zoeken…" size="small"></lightning-spinner>
                <div class="wc-loading__msg">Zoeken op ingevoerde gegevens…</div>
            </div>
        </template>

        <!-- Empty state (after completed fetch with inputs) -->
        <template if:true={showEmptyState}>
            <div class="wc-empty">
                <div class="wc-empty__msg">{message}</div>
                <div class="wc-countdown" aria-live="polite">
                    Doorgaan in <span class="wc-countdown__num">{secondsRemaining}</span> seconden…
                </div>
            </div>
        </template>
    </div>
</template>